{% extends 'base.html.twig' %}

{% block title %}Tous les articles{% endblock %}

{% block body %}
    <div class="max-w-4xl mx-auto px-4 py-10">

        <div class="flex justify-between items-center mb-8">
            <h1 class="text-3xl font-bold text-center">Liste de tous les articles</h1>
            {% if app.user %}
            <a href="{{ path('app_post_new') }}"
               class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition">
                ‚ûï Nouvel article
            </a>
            {% endif %}
        </div>

        {% for post in posts %}
            <article class="bg-white shadow-md rounded-xl p-6 mb-6 hover:shadow-lg transition">
                <h2 class="text-2xl font-semibold text-blue-700 hover:underline mb-2">
                    <a href="{{ path('app_post_show', { id: post.id }) }}">
                        {{ post.title }}
                    </a>
                </h2>
                <p class="text-gray-700 mb-3">
                    {{ post.content|slice(0, 150) ~ '...' }}
                </p>
                <p class="text-sm text-gray-500 mb-1">
                    ‚úçÔ∏è <em>Par {{ post.author }}</em>
                </p>
                <p class="text-sm text-gray-500">
                    üìÖ <em>Publi√© le {{ post.createdAt|date('d/m/Y √† H:i') }}</em>
                </p>
                <p class="text-sm text-gray-600">
                    ‚ù§Ô∏è <strong>{{ post.getLikeCount() }}</strong> like{{ post.getLikeCount() > 1 ? 's' : '' }}
                </p>
            </article>
        {% else %}
            <p class="text-gray-500 text-center italic">Aucun article pour le moment.</p>
        {% endfor %}

    </div>
{% endblock %}
